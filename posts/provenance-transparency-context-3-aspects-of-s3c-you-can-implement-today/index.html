<!doctype html><html dir=ltr lang=en data-theme=dark><head><title>Mark Chmarny
|
Provenance, transparency, and context, the three aspects of software supply chain security you can implement today</title><meta charset=utf-8><meta name=generator content="Hugo 0.113.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="
      few longer thoughts, <br/>because every once in a while <br/>140 characters is just not enough


    "><link rel=stylesheet href=/css/main.min.179cc2d1e93212b8ec31560509068248e4269f4b648220d1154adb0d5e94aa7d.css integrity="sha256-F5zC0ekyErjsMVYFCQaCSOQmn0tkgiDRFUrbDV6Uqn0=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.058b31f17db60602cc415fd63b0427e7932fbf35c70d8e341a4c39385f5f6f3e.css integrity="sha256-BYsx8X22BgLMQV/WOwQn55MvvzXHDY40Gkw5OF9fbz4=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/custom.min.c932a7c5e2d9eb0228f2bd2992ea2d5acb4f2715f7d229cebabea22225c38356.css integrity="sha256-yTKnxeLZ6wIo8r0pkuotWstPJxX30inOur6iIiXDg1Y=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Indie+Flower&amp;family=Roboto:ital,wght@0,100;0,400;0,700;1,400&amp;display=swap" rel=stylesheet><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=https://blog.chmarny.com/posts/provenance-transparency-context-3-aspects-of-s3c-you-can-implement-today/><script type=text/javascript src=/js/anatole-header.min.d0408165d31a17f17bba83038bf54e86121f85021bdf936382e636f0f77a952f.js integrity="sha256-0ECBZdMaF/F7uoMDi/VOhhIfhQIb35NjguY28Pd6lS8=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js integrity="sha256-EXPXz4W6pQgfYY3yTpnDa3OH8/EPn16ciVsPQ/ypsjk=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js integrity="sha256-LAGhRRdtVoD6RLo2qDQsU2mp+XVSciKRC8XPOBWmofM=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.ea8ebe268922ef9849261a1312cd65b640595e65251ce4c00534a176afd1ac0c.js integrity="sha256-6o6+Joki75hJJhoTEs1ltkBZXmUlHOTABTShdq/RrAw=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/search.min.b3a692306dd9db78b63ea76fac0b1b32033f19465563f7378cf5f7dc05811ce7.js integrity="sha256-s6aSMG3Z23i2PqdvrAsbMgM/GUZVY/c3jPX33AWBHOc=" crossorigin=anonymous></script><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.chmarny.com/images/site-feature-image.png"><meta name=twitter:title content="Provenance, transparency, and context, the three aspects of software supply chain security you can implement today"><meta name=twitter:description content="The practice of Secure Software Supply Chain (S3C) can get complex at times. Fortunately though, a large portion of the key things we can do to secure our software delivery pipelines are actually pretty easy. This post covers three concepts you can implement today:"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Provenance, transparency, and context, the three aspects of software supply chain security you can implement today","headline":"Provenance, transparency, and context, the three aspects of software supply chain security you can implement today","alternativeHeadline":"","description":"
      
        The practice of Secure Software Supply Chain (S3C) can get complex at times. Fortunately though, a large portion of the key things we can do to secure our software delivery pipelines are actually pretty easy. This post covers three concepts you can implement today:


      


    ","inLanguage":"en","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.chmarny.com\/posts\/provenance-transparency-context-3-aspects-of-s3c-you-can-implement-today\/"},"author":{"@type":"Person","name":"Mark Chmarny"},"creator":{"@type":"Person","name":"Mark Chmarny"},"accountablePerson":{"@type":"Person","name":"Mark Chmarny"},"copyrightHolder":{"@type":"Person","name":"Mark Chmarny"},"copyrightYear":"2023","dateCreated":"2023-06-14T08:57:57.00Z","datePublished":"2023-06-14T08:57:57.00Z","dateModified":"2023-06-14T08:57:57.00Z","publisher":{"@type":"Organization","name":"Mark Chmarny","url":"https://blog.chmarny.com","logo":{"@type":"ImageObject","url":"https:\/\/blog.chmarny.com\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":["https://blog.chmarny.com/images/site-feature-image.png"],"url":"https:\/\/blog.chmarny.com\/posts\/provenance-transparency-context-3-aspects-of-s3c-you-can-implement-today\/","wordCount":"1145","genre":["dev"],"keywords":["s3c","sbom","cve","slsa","sbom","vex"]}</script></head><body><header><div class="page-top
."><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a><nav><ul class=nav__list id=navMenu><div class=nav__links><li><a href=/ title>Home</a></li><li><a href=/posts/ title>Posts</a></li><li><a href=/search/ title>Search</a></li><li><a href=/about/ title>About</a></li></div><ul><li><a class=theme-switch title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></li></ul></ul></nav></div></header><div class=wrapper><aside><div class="sidebar
."><div class=sidebar__content><div class=logo-title><div class=title><img src=/images/profile.png alt="profile picture"><h3 title><a href=/>Mark Chmarny</a></h3><div class=description><p>few longer thoughts,<br>because every once in a while<br>140 characters is just not enough</p></div></div></div><ul class=social-links><li><a href=https://twitter.com/mchmarny rel=me aria-label=Twitter title=Twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li><a href=https://fosstodon.org/@mchmarny rel=me aria-label=Mastodon title=Mastodon><i class="fab fa-mastodon fa-2x" aria-hidden=true></i></a></li><li><a href=https://github.com/mchmarny rel=me aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=https://speakerdeck.com/mchmarny rel=me aria-label="Speaker Deck" title="Speaker Deck"><i class="fas fa-file-powerpoint fa-2x" aria-hidden=true></i></a></li><li><a href=mailto:blog@chmarny.com rel=me aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer--sidebar"><div class=by_farbox><ul class=footer__list><li class=footer__item><a rel=me href=https://fosstodon.org/@mchmarny>&copy;2022</a></li></ul></div></footer></div></aside><main><div class=autopagerize_page_element><div class=content><div class="post
."><div class=post-content><img class=post-thumbnail src=/images/s3c2-head.png alt="Thumbnail image"><div class=post-title><h1>Provenance, transparency, and context, the three aspects of software supply chain security you can implement today</h1></div><p>The practice of Secure Software Supply Chain (S3C) can get complex at times. Fortunately though, a large portion of the key things we can do to secure our software delivery pipelines are actually pretty easy. This post covers three concepts you can implement today:</p><ul><li><strong>provenance</strong> - Where and how was the software created? Using what source code, tools, and build system? Who were the individuals involved in its development?</li><li><strong>transparency</strong> - What’s in the software artifact? What are the packages, libraries, and their versions? Who provided them? And, what are the relationships between them? (what depends on, uses, what)</li><li><strong>context</strong> - What are the vulnerabilities, and what is their potential exploitability in that specific artifact?</li></ul><p>Let&rsquo;s review each one of these and provide some options on how to implement them in your software release pipeline.</p><h1 id=provenance>Provenance</h1><p>The open source community under OpenSSF has created a security framework for how we can think of build provenance. This framework is called <a href=https://slsa.dev/>Supply Chain Levels for Software Artifacts</a> (SLSA). it provides a standardized check-list of controls to improve the integrity, prevent tampering, and secure software artifacts and build infrastructure.</p><p>At its core, SLSA is based on the builders producing conformant and signed provenance documents (aka build attestation). The provenance document includes Build Definition (e.g. parameters, dependencies), and Run Details (e.g. builder, metadata). And, to make it easier for us to reason about it, the key characteristics of the build provenance are grouped into SLSA Levels (1-3). The downstream consumers of the produced artifacts can inspect the provenance, and base their policy decisions on the inferred level of SLSA. More about SLSA levels on <a href=https://slsa.dev/spec/v1.0/about>slsa.dev</a>.</p><p>Add SLSA-based build provenance to your release pipeline:</p><ul><li><a href=https://cloud.google.com/build/docs/securing-builds/view-build-provenance>Google Cloud Build</a> - Level 3 assurance automatically generated in Artifact Analysis for all images pushed to Artifact Registry</li><li><a href=https://github.com/slsa-framework/slsa-github-generator>GitHub Actions</a> - Reusable workflow, which when added to your release pipeline generates Level 3 build provenance</li><li><a href=https://about.gitlab.com/blog/2022/11/30/achieve-slsa-level-2-compliance-with-gitlab/>GitLab CI/CD</a> - Runner which can generate artifact metadata meeting SLSA Level 2 with support for external code signer to potentially deliver Level 3.</li></ul><blockquote><p>Regardless of the means by which SLSA provenance was generated, you can use the <a href=https://github.com/slsa-framework/slsa-verifier>SLSA Verifier CLI</a> to ensure its validity.</p></blockquote><h1 id=transparency>Transparency</h1><p>While SLSA is about how the software was produced, Software Bill of Materials (SBOM) is about what&rsquo;s in the software. Think of SBOM like an ingredients label on a can of food you buy in the grocery store. It&rsquo;s an inventory of all the components that make up the software. SBOMs are used during the production of software (e.g. license compliance), during process of software selection (e.g. policy compliance), or during operations (e.g. risk management). SBOMs can be also used in all three of these use-cases for vulnerability monitoring as new vulnerabilities are discovered all the time. More about SBOM and the related US regulation on <a href=https://www.cisa.gov/sbom>cisa.gov/sbom</a>. Similar regulations apply in the <a href=https://www.europarl.europa.eu/thinktank/en/document/EPRS_BRI(2021)689333>EU</a> and the <a href=https://www.nist.gov/system/files/documents/2022/05/11/Guidance%20on%20Software%20Supply%20Chain%20Security_EO14028%20Sections%204c_4d%5B71%5D.pdf>UK</a>. While there is many formats/flavors of SBOM, the most common open standards today are:</p><ul><li>SPDX (Software Package Data Exchange) - Provides a structured format for documenting software components, licenses, copyrights, and security vulnerabilities, including information about packages, files, and relationships. It&rsquo;s maintained by the Linux Foundation (LF), and it has a broader ecosystem of tools and libraries which can make it easier to integrate into your pipeline. Given the extensive set of fields and options, SPDX can get complex for humans to reason about though.</li><li>CycloneDX - Provides a lightweight and flexible representation of the components and dependencies, including details about packages, versions, licenses, and vulnerability information, allowing for interoperability between different tools and platforms. CycloneDX allows for extensibility (see VEX section below). However, unlike SPDX, CycloneDX is not an industry-standard format, and while it has gained traction and adoption, it may not enjoy the same level of standardization and industry-wide acceptance as SPDX.</li></ul><p>Ultimately, the choice between SPDX and CycloneDX depends on your specific needs, the ecosystem you operate in, and the level of standardization and extensibility required for your software supply chain management.</p><p>You can add SBOM to your release pipeline in a number of ways:</p><ul><li><strong>Using Lockfile</strong> - These SBOMs are generated using the information in language specific lockfile (e.g. go.mod, gradle.lockfile, or pom.xml). Sometimes they are generated by your Source Code Management System (e.g. <a href=https://github.blog/2023-03-28-introducing-self-service-sboms/>GitHub SBOM</a>). While easy, this approach does not account only for the user defined code, and lacks information about the base image on which this code will be deployed. Lockfile-based SBOMs don&rsquo;t work well also for repos which build to more than one artifact.</li><li><strong>During Build</strong> - Generating SBOMs during build is not very common yet. For the Go ecosystem, there is <a href=https://github.com/ko-build/ko>ko</a>, and for Java <a href=https://github.com/CycloneDX/cyclonedx-maven-plugin>Maven using the CycloneDX plugin</a>. The benefit of this approach is build tools have a deep understanding of the dependencies, and the SBOM generation becomes this way an inherent part of the build workflow, ensuring consistency with each build (e.g. format)</li><li><strong>From Container</strong> - These SBOMs are generated from the final product. This is the most common approach to generating SBOMs today (e.g. using OSS tools like <a href=https://github.com/anchore/syft>syft</a> or <a href=https://github.com/snyk/cli>snyk</a>). The reliance on the layered file systems or container image may result in an incomplete view of all the dependencies, especially with transitive dependencies and in situations when not installed using package manager.</li></ul><h1 id=context>Context</h1><p>Unless you are building a simple hello world application, chances are high you will have some vulnerabilities in your software and/or its dependencies. The thing that&rsquo;s important to realize though is that software can contain components with vulnerabilities and yet not be vulnerable itself. This is where <a href=https://www.cisa.gov/sites/default/files/publications/VEX_Use_Cases_Document_508c.pdf>Vulnerability Exploitability eXchange</a> (VEX) comes in. It&rsquo;s a machine-readable file that can be used by producers to convey information about the actual &ldquo;exploitability&rdquo; of each vulnerability and prioritize remediation, and by the consumers as an input into policy controls driving their release process.</p><p>The file itself is based on set of assertions (impact statements) about the status of a
vulnerability in specific artifact and deployment context:</p><ul><li><code>Not affected</code> – No remediation is required regarding this vulnerability.</li><li><code>Affected</code> – Actions are recommended to remediate or address this vulnerability.</li><li><code>Fixed</code> – Represents that these product versions contain a fix for the vulnerability.</li><li><code>Under Investigation</code> – Still looking whether this artifact is affected by
this vulnerability.</li></ul><p>Somewhat early days for VEX, so there isn&rsquo;t yet a well-formalized standard or many OSS tools. Still, A couple of interesting initiatives in this space worth keeping an eye on:</p><ul><li><a href=https://cyclonedx.org/capabilities/vex/>CycloneDX 1.4</a> - This version of the CycloneDX SBOM format adds support for VEX&rsquo;d vulnerabilities. This embedded VEX provides a single artifact that describes both inventory and VEX data.</li><li><a href=https://github.com/openvex>OpenVEX</a> is a minimal (but compliant) implementation of the VEX format optimized for interoperability. OpenVex includes spec, and a growing ecosystem of tools (<a href=https://github.com/openvex/go-vex>Go</a>, <a href=https://github.com/JamieMagee/openvex.net>.NET</a>, <a href=https://docs.rs/openvex/latest/openvex/>Rest</a>).</li></ul><h1 id=conclusion>Conclusion</h1><p>Hope this post helped you identify at least one thing you can do in your software release pipeline to increase its supply chain security.</p></div><div class=post-footer><div class=info><span class=separator><a class=category href=/categories/dev/>dev</a></span>
<span class=separator><a class=tag href=/tags/s3c/>s3c</a><a class=tag href=/tags/sbom/>sbom</a><a class=tag href=/tags/cve/>cve</a><a class=tag href=/tags/slsa/>slsa</a><a class=tag href=/tags/sbom/>sbom</a><a class=tag href=/tags/vex/>vex</a></span></div></div></div></div></div></main></div><footer class="footer footer--base"><div class=by_farbox><ul class=footer__list><li class=footer__item><a rel=me href=https://fosstodon.org/@mchmarny>&copy;2022</a></li></ul></div></footer></body></html>