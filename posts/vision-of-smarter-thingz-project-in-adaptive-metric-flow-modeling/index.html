<!doctype html><html lang=en dir=auto data-theme=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Vision of smarter thingz - project in adaptive metric flow modeling | Mark Chmarny</title><meta name=keywords content="metric,dev,cloud,go"><meta name=description content="Over the holidays, as many of us do, I embarked on a little extra-curriculum development effort I called thingz.io. I was driven by the pattern I’d observed in Data Center (DC) monitoring products; although that pattern also exists in many of today’s Internet of Things (IoT) solutions."><meta name=author content="Mark Chmarny"><link rel=canonical href=https://blog.chmarny.com/posts/vision-of-smarter-thingz-project-in-adaptive-metric-flow-modeling/><link crossorigin=anonymous href=/assets/css/stylesheet.5bef4b698d33ee9d58f22269d129fe3c725b1b3356a4ed1ded10651b773f88c5.css integrity="sha256-W+9LaY0z7p1Y8iJp0Sn+PHJbGzNWpO0d7RBlG3c/iMU=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.chmarny.com/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmarny.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmarny.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmarny.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmarny.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.chmarny.com/posts/vision-of-smarter-thingz-project-in-adaptive-metric-flow-modeling/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>localStorage.getItem("pref-theme")==="light"&&(document.querySelector("html").dataset.theme="light")</script><meta property="og:url" content="https://blog.chmarny.com/posts/vision-of-smarter-thingz-project-in-adaptive-metric-flow-modeling/"><meta property="og:site_name" content="Mark Chmarny"><meta property="og:title" content="Vision of smarter thingz - project in adaptive metric flow modeling"><meta property="og:description" content="Over the holidays, as many of us do, I embarked on a little extra-curriculum development effort I called thingz.io. I was driven by the pattern I’d observed in Data Center (DC) monitoring products; although that pattern also exists in many of today’s Internet of Things (IoT) solutions."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-04-27T00:43:24+00:00"><meta property="article:modified_time" content="2016-04-27T00:43:24+00:00"><meta property="article:tag" content="Metric"><meta property="article:tag" content="Dev"><meta property="article:tag" content="Cloud"><meta property="article:tag" content="Go"><meta property="og:image" content="https://blog.chmarny.com/images/site-feature-image.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.chmarny.com/images/site-feature-image.png"><meta name=twitter:title content="Vision of smarter thingz - project in adaptive metric flow modeling"><meta name=twitter:description content="Over the holidays, as many of us do, I embarked on a little extra-curriculum development effort I called thingz.io. I was driven by the pattern I’d observed in Data Center (DC) monitoring products; although that pattern also exists in many of today’s Internet of Things (IoT) solutions."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmarny.com/posts/"},{"@type":"ListItem","position":2,"name":"Vision of smarter thingz - project in adaptive metric flow modeling","item":"https://blog.chmarny.com/posts/vision-of-smarter-thingz-project-in-adaptive-metric-flow-modeling/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Vision of smarter thingz - project in adaptive metric flow modeling","name":"Vision of smarter thingz - project in adaptive metric flow modeling","description":"Over the holidays, as many of us do, I embarked on a little extra-curriculum development effort I called thingz.io. I was driven by the pattern I’d observed in Data Center (DC) monitoring products; although that pattern also exists in many of today’s Internet of Things (IoT) solutions.\n","keywords":["metric","dev","cloud","go"],"articleBody":"Over the holidays, as many of us do, I embarked on a little extra-curriculum development effort I called thingz.io. I was driven by the pattern I’d observed in Data Center (DC) monitoring products; although that pattern also exists in many of today’s Internet of Things (IoT) solutions.\nI refer to this pattern as Forensic Understanding. In simplest terms it implies that in order to understand (derive any value) out of monitoring data we must first persist that data; load it into a priory-defined model, probably in some kind of database. This approach is often driven by the use of traditional BI tools to “understand” these metric in a context of an entire volume.\nThere are two fundamental weaknesses in this approach though:\nIt requires design-time model definition (understanding of the questions one will be asking) and designing the underlining persistence to optimize for that usage model and, it often requires interactive analysis. As the number of “things” we monitor grows the volume of data that needs to be analyzed increases Addressing these weaknesses requires a fundamental shift from reports and forensic queries to more adaptive models and dynamic rules.\nAs a result of the after-the-fact nature of this approach, the value of the analyzed data is often realized too late to make any significant impact.\nThingz Understood To experiment with an idea I created a couple of GitHub projects: thingz-agent where thingz are measured and thingz-server where thingz are understood.\nthingz-agent Generates streams of system metrics from variety of devices (cpu, memory, swap, load, processes, etc.) based on configurable strategies: report CPU every second but system load every 10 and so forth. To accommodate different deployment scales, thingz-agent also supports multiple publishers:\nkafka — queues messages in Kafka influxdb — publishes to REST or UDP endpoint stdout — output to console thingz-server Processes the inbound streams and builds dynamic models which identifies portent data (signal) and filter it from the noise. The thingz-server can actually close the loop and provide this guidance to the agents to pre-filter that data right at the edge.\nYes, the thingz-server also supports forensic queries. And, because it is generic in nature, it doesn’t require priory model definition which in turn enables data discovery with fair amount of analytical capabilities while supporting down-sampling to any arbitrary level (e.g. deviation, mean and percentile for all records from specific sources over last hour down-sampled to one minute).\nActuation Guidance To support schedulers and other type of actuators, the thingz-server also exposes a flexible REST API designed to identify availability across all monitored resources. Here is an example of a query for least utilized resources based on standard deviation in memory over last 10 min.\n[GET] — /api/v1.0/util/mem/used/10 All in all this was an interesting exercise in understanding the challenges related to dynamic models… even if it got me the occasional look from my wife for “working” over holidays;)\n","wordCount":"481","inLanguage":"en","image":"https://blog.chmarny.com/images/site-feature-image.png","datePublished":"2016-04-27T00:43:24.538Z","dateModified":"2016-04-27T00:43:24.538Z","author":{"@type":"Person","name":"Mark Chmarny"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmarny.com/posts/vision-of-smarter-thingz-project-in-adaptive-metric-flow-modeling/"},"publisher":{"@type":"Organization","name":"Mark Chmarny","logo":{"@type":"ImageObject","url":"https://blog.chmarny.com/favicons/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.chmarny.com/ accesskey=h title="Mark Chmarny (Alt + H)">Mark Chmarny</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.chmarny.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://blog.chmarny.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.chmarny.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.chmarny.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://blog.chmarny.com/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.chmarny.com/>Home</a>&nbsp;»&nbsp;<a href=https://blog.chmarny.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Vision of smarter thingz - project in adaptive metric flow modeling</h1><div class=post-meta><span title='2016-04-27 00:43:24.538 +0000 UTC'>2016-04-27</span>&nbsp;·&nbsp;<span>3 min</span>&nbsp;·&nbsp;<span>Mark Chmarny</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#thingz-understood aria-label="Thingz Understood">Thingz Understood</a><ul><li><a href=#thingz-agent aria-label=thingz-agent>thingz-agent</a></li><li><a href=#thingz-server aria-label=thingz-server>thingz-server</a></li></ul></li><li><a href=#actuation-guidance aria-label="Actuation Guidance">Actuation Guidance</a></li></ul></div></details></div><div class=post-content><p>Over the holidays, as many of us do, I embarked on a little extra-curriculum development effort I called <a href=http://thingz.io>thingz.io</a>. I was driven by the pattern I’d observed in Data Center (DC) monitoring products; although that pattern also exists in many of today’s Internet of Things (IoT) solutions.</p><p>I refer to this pattern as Forensic Understanding. In simplest terms it implies that in order to understand (derive any value) out of monitoring data we must first persist that data; load it into a priory-defined model, probably in some kind of database. This approach is often driven by the use of traditional BI tools to &ldquo;understand&rdquo; these metric in a context of an entire volume.</p><p>There are two fundamental weaknesses in this approach though:</p><ol><li>It requires design-time model definition (understanding of the questions one will be asking) and designing the underlining persistence to optimize for that usage model</li><li>and, it often requires interactive analysis. As the number of &ldquo;things&rdquo; we monitor grows the volume of data that needs to be analyzed increases</li></ol><p><img loading=lazy src=/images/0__1nV8o5g5__Ofsz73h.png></p><blockquote><p>Addressing these weaknesses requires a fundamental shift from reports and forensic queries to more adaptive models and dynamic rules.</p></blockquote><p>As a result of the after-the-fact nature of this approach, the value of the analyzed data is often realized too late to make any significant impact.</p><h2 id=thingz-understood>Thingz Understood<a hidden class=anchor aria-hidden=true href=#thingz-understood>#</a></h2><p>To experiment with an idea I created a couple of GitHub projects: <a href=https://github.com/mchmarny/thingz-agent>thingz-agent</a> where thingz are measured and <a href=https://github.com/mchmarny/thingz-server>thingz-server</a> where thingz are understood.</p><p><img loading=lazy src=/images/0__zBA9IFF892B4yRi.png></p><h3 id=thingz-agent><a href=https://github.com/mchmarny/thingz-agent>thingz-agent</a><a hidden class=anchor aria-hidden=true href=#thingz-agent>#</a></h3><p>Generates streams of system metrics from variety of devices (cpu, memory, swap, load, processes, etc.) based on configurable strategies: report CPU every second but system load every 10 and so forth. To accommodate different deployment scales, thingz-agent also supports multiple publishers:</p><ul><li><strong>kafka</strong> — queues messages in Kafka</li><li><strong>influxdb</strong> — publishes to REST or UDP endpoint</li><li><strong>stdout</strong> — output to console</li></ul><h3 id=thingz-server><a href=https://github.com/mchmarny/thingz-server>thingz-server</a><a hidden class=anchor aria-hidden=true href=#thingz-server>#</a></h3><p>Processes the inbound streams and builds dynamic models which identifies portent data (signal) and filter it from the noise. The thingz-server can actually close the loop and provide this guidance to the agents to pre-filter that data right at the edge.</p><p>Yes, the thingz-server also supports forensic queries. And, because it is generic in nature, it doesn’t require priory model definition which in turn enables data discovery with fair amount of analytical capabilities while supporting down-sampling to any arbitrary level (e.g. deviation, mean and percentile for all records from specific sources over last hour down-sampled to one minute).</p><h2 id=actuation-guidance>Actuation Guidance<a hidden class=anchor aria-hidden=true href=#actuation-guidance>#</a></h2><p>To support schedulers and other type of actuators, the thingz-server also exposes a flexible REST API designed to identify availability across all monitored resources. Here is an example of a query for least utilized resources based on standard deviation in memory over last 10 min.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>GET<span class=o>]</span> — /api/v1.0/util/mem/used/10
</span></span></code></pre></div><p>All in all this was an interesting exercise in understanding the challenges related to dynamic models… even if it got me the occasional look from my wife for &ldquo;working&rdquo; over holidays;)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chmarny.com/tags/metric/>Metric</a></li><li><a href=https://blog.chmarny.com/tags/dev/>Dev</a></li><li><a href=https://blog.chmarny.com/tags/cloud/>Cloud</a></li><li><a href=https://blog.chmarny.com/tags/go/>Go</a></li></ul><nav class=paginav><a class=prev href=https://blog.chmarny.com/posts/how-lufthansa-has-made-me-question-the-value-of-star-alliance/><span class=title>« Prev</span><br><span>How Lufthansa has made me question the value of Star Alliance</span>
</a><a class=next href=https://blog.chmarny.com/posts/my-experience-with-google-compute-engine/><span class=title>Next »</span><br><span>My experience with Google Compute Engine</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://blog.chmarny.com/>Mark Chmarny</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>